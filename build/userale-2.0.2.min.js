/**
 * Licensed to the Apache Software Foundation (ASF) under one or more
 * contributor license agreements.  See the NOTICE file distributed with
 * this work for additional information regarding copyright ownership.
 * The ASF licenses this file to You under the Apache License, Version 2.0
 * (the "License"); you may not use this file except in compliance with
 * the License.  You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * @preserved
 */
var userale=function(n){"use strict";var u,l,i,a,s,c,d,f,e="2.0.2",r=null;function t(n,o){Object.keys(o).forEach(function(e){if("userFromParams"===e){var t=function(e){var t=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),n=window.location.href.match(t);return n&&n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):null}(o[e]);t&&(n.userId=t)}n[e]=o[e]})}var m=null,g=null;function o(e,t){if(!l.on)return!1;var n=null;t&&(n=t(e));var o=p(e.timeStamp&&0<e.timeStamp?l.time(e.timeStamp):Date.now()),r={target:h(e.target),path:v(e),pageUrl:window.location.href,pageTitle:document.title,pageReferrer:document.referrer,clientTime:o.milli,microTime:o.micro,location:function(e){return null!=e.pageX?{x:e.pageX,y:e.pageY}:null!=e.clientX?{x:document.documentElement.scrollLeft+e.clientX,y:document.documentElement.scrollTop+e.clientY}:{x:null,y:null}}(e),type:e.type,logType:"raw",userAction:!0,details:n,userId:l.userId,toolVersion:l.version,toolName:l.toolName,useraleVersion:l.useraleVersion,sessionID:l.sessionID};return!("function"==typeof m&&!m(r))&&("function"==typeof g&&(r=g(r,e)),u.push(r),!0)}function p(e){return{milli:Math.floor(e),micro:Number((e%1).toFixed(3))}}function h(e){return e.localName?e.localName+(e.id?"#"+e.id:"")+(e.className?"."+e.className:""):e.nodeName?e.nodeName+(e.id?"#"+e.id:"")+(e.className?"."+e.className:""):e&&e.document&&e.location&&e.alert&&e.setInterval?"Window":"Unknown"}function v(e){var t=[];if(e.path)t=e.path;else for(var n=e.target;n;)t.push(n),n=n.parentElement;return function(e){var t,n=0,o=[];for(;t=e[n];)o.push(h(t)),++n;return o}(t)}var w,y,S,I=null;function N(e,t){null!==I&&clearInterval(I),I=function(e,t){return setInterval(function(){t.on&&e.length>=t.logCountThreshold&&(b(e.slice(0),t,0),e.splice(0))},t.transmitInterval)}(e,t),function(e,t){if(!t.on)return;navigator.sendBeacon?window.addEventListener("unload",function(){navigator.sendBeacon(t.url,JSON.stringify(e))}):window.addEventListener("beforeunload",function(){0<e.length&&b(e,t,1)})}(e,t)}function b(e,t,n){var o=new XMLHttpRequest,r=JSON.stringify(e);o.open("POST",t.url),t.authHeader&&o.setRequestHeader("Authorization",t.authHeader),o.setRequestHeader("Content-type","application/json;charset=UTF-8"),o.onreadystatechange=function(){4===o.readyState&&200!==o.status&&0<n&&b(e,t,n--)},o.send(r)}var D,E=["click","focus","blur","input","change","mouseover","submit"],T=["load","blur","focus"];function k(e){return{clicks:e.detail,ctrl:e.ctrlKey,alt:e.altKey,shift:e.shiftKey,meta:e.metaKey}}function K(n){return function(e){w={click:k,dblclick:k,mousedown:k,mouseup:k,focus:null,blur:null,input:e.logDetails?function(e){return{value:e.target.value}}:null,change:e.logDetails?function(e){return{value:e.target.value}}:null,dragstart:null,dragend:null,drag:null,drop:null,keydown:e.logDetails?function(e){return{key:e.keyCode,ctrl:e.ctrlKey,alt:e.altKey,shift:e.shiftKey,meta:e.metaKey}}:null,mouseover:null},y={},S={wheel:function(e){return{x:e.deltaX,y:e.deltaY,z:e.deltaZ}},scroll:function(){return{x:window.scrollX,y:window.scrollY}},resize:function(){return{width:window.outerWidth,height:window.outerHeight}}},D={submit:null}}(n),Object.keys(w).forEach(function(t){document.addEventListener(t,function(e){o(e,w[t])},!0)}),E.forEach(function(e){document.addEventListener(e,function(e){!function(e){var t=h(e.target),n=v(e),o=e.type,r=Math.floor(e.timeStamp&&0<e.timeStamp?l.time(e.timeStamp):Date.now());if(null==i&&(i=t,a=o,s=n,c=r,d=0),i!==t||a!==o){if(f={target:i,path:s,pageUrl:window.location.href,pageTitle:document.title,pageReferrer:document.referrer,count:d,duration:r-c,startTime:c,endTime:r,type:a,logType:"interval",targetChange:i!==t,typeChange:a!==o,userAction:!1,userId:l.userId,toolVersion:l.version,toolName:l.toolName,useraleVersion:l.useraleVersion,sessionID:l.sessionID},"function"==typeof m&&!m(f))return;"function"==typeof g&&(f=g(f)),u.push(f),i=t,a=o,s=n,c=r,d=0}i==t&&a==o&&(d+=1)}(e)},!0)}),Object.keys(S).forEach(function(t){y[t]=!0,window.addEventListener(t,function(e){y[t]&&(y[t]=!1,o(e,S[t]),setTimeout(function(){y[t]=!0},n.resolution))},!0)}),Object.keys(D).forEach(function(t){document.addEventListener(t,function(e){o(e,w[t]),function(e,t){t.on&&0<e.length&&b(e,t,1)}(u,n)},!0)}),T.forEach(function(e){window.addEventListener(e,function(e){o(e,function(){return{window:!0}})},!0)}),!0}var L={},O=[];function C(t){n.started||setTimeout(function(){var e=document.readyState;"interactive"===e||"complete"===e?(K(t),N(O,t),n.started=t.on=!0):C(t)},100)}n.started=!1,L.on=!1,L.useraleVersion=e,t(L,function(){var e={};null===r&&(r=function(e,t){return null!==window.sessionStorage.getItem(e)?JSON.parse(window.sessionStorage.getItem(e)):(window.sessionStorage.setItem(e,JSON.stringify(t)),JSON.stringify(t))}("userAleSessionId","session_"+String(Date.now())));var t,n=document.currentScript||(t=document.getElementsByTagName("script"))[t.length-1],o=n?n.getAttribute.bind(n):function(){return null};return e.autostart="false"!==o("data-autostart"),e.url=o("data-url")||"http://localhost:8000",e.transmitInterval=+o("data-interval")||5e3,e.logCountThreshold=+o("data-threshold")||5,e.userId=o("data-user")||null,e.version=o("data-version")||null,e.logDetails="true"===o("data-log-details"),e.resolution=+o("data-resolution")||500,e.toolName=o("data-tool")||null,e.userFromParams=o("data-user-from-params")||null,e.time=function(e){if(e.timeStamp&&0<e.timeStamp){var t,n=Date.now()-e.timeStamp;if(n<0)t=function(){return e.timeStamp/1e3};else if(n>e.timeStamp){var o=performance.timing.navigationStart;t=function(e){return e+o}}else t=function(e){return e}}else t=function(){return Date.now()};return t}(document.createEvent("CustomEvent")),e.sessionID=o("data-session")||r,e.authHeader=o("data-auth")||null,e}()),u=O,l=L,d=0,f=c=s=a=i=g=m=null,L.autostart&&C(L);return n.buildPath=v,n.details=function(e,t){return{click:k,dblclick:k,mousedown:k,mouseup:k,focus:null,blur:null,input:e.logDetails?function(e){return{value:e.target.value}}:null,change:e.logDetails?function(e){return{value:e.target.value}}:null,dragstart:null,dragend:null,drag:null,drop:null,keydown:e.logDetails?function(e){return{key:e.keyCode,ctrl:e.ctrlKey,alt:e.altKey,shift:e.shiftKey,meta:e.metaKey}}:null,mouseover:null,wheel:function(e){return{x:e.deltaX,y:e.deltaY,z:e.deltaZ}},scroll:function(){return{x:window.scrollX,y:window.scrollY}},resize:function(){return{width:window.outerWidth,height:window.outerHeight}},submit:null}[t]},n.filter=function(e){m=e},n.getSelector=h,n.log=function(e){return null!==e&&"object"==typeof e&&(O.push(e),!0)},n.map=function(e){g=e},n.options=function(e){return void 0!==e&&t(L,e),L},n.packageCustomLog=function(e,t,n){if(!l.on)return!1;var o=null;t&&(o=t());var r=p(Date.now()),i={pageUrl:window.location.href,pageTitle:document.title,pageReferrer:document.referrer,clientTime:r.milli,microTime:r.micro,logType:"custom",userAction:n,details:o,userId:l.userId,toolVersion:l.version,toolName:l.toolName,useraleVersion:l.useraleVersion,sessionID:l.sessionID},a=Object.assign(e,i);return!("function"==typeof m&&!m(a))&&("function"==typeof g&&(a=g(a)),u.push(a),!0)},n.packageLog=o,n.start=function(){n.started||C(L),L.on=!0},n.stop=function(){L.on=!1},n.version="2.0.2",n}({});