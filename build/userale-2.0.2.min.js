/**
 * Licensed to the Apache Software Foundation (ASF) under one or more
 * contributor license agreements.  See the NOTICE file distributed with
 * this work for additional information regarding copyright ownership.
 * The ASF licenses this file to You under the Apache License, Version 2.0
 * (the "License"); you may not use this file except in compliance with
 * the License.  You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * @preserved
 */
var userale=function(n){"use strict";var a,i,u,l,s,c,d,f,t="2.0.2";function e(n,o){Object.keys(o).forEach(function(t){if("userFromParams"===t){var e=function(t){var e=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)"),n=window.location.href.match(e);return n&&n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):null}(o[t]);e&&(n.userId=e)}n[t]=o[t]})}var m=null,p=null;function o(t,e){if(!i.on)return!1;var n=null;e&&(n=e(t));var o=function(t){return{milli:Math.floor(t),micro:Number((t%1).toFixed(3))}}(t.timeStamp&&0<t.timeStamp?i.time(t.timeStamp):Date.now()),r={target:g(t.target),path:v(t),pageUrl:window.location.href,pageTitle:document.title,pageReferrer:document.referrer,clientTime:o.milli,microTime:o.micro,location:function(t){return null!=t.pageX?{x:t.pageX,y:t.pageY}:null!=t.clientX?{x:document.documentElement.scrollLeft+t.clientX,y:document.documentElement.scrollTop+t.clientY}:{x:null,y:null}}(t),type:t.type,logType:"raw",userAction:!0,details:n,userId:i.userId,toolVersion:i.version,toolName:i.toolName,useraleVersion:i.useraleVersion,sessionID:i.sessionID};return!("function"==typeof m&&!m(r))&&("function"==typeof p&&(r=p(r)),a.push(r),!0)}function g(t){return t.localName?t.localName+(t.id?"#"+t.id:"")+(t.className?"."+t.className:""):t.nodeName?t.nodeName+(t.id?"#"+t.id:"")+(t.className?"."+t.className:""):t&&t.document&&t.location&&t.alert&&t.setInterval?"Window":"Unknown"}function v(t){var e=[];if(t.path)e=t.path;else for(var n=t.target;n;)e.push(n),n=n.parentElement;return function(t){var e,n=0,o=[];for(;e=t[n];)o.push(g(e)),++n;return o}(e)}var r,h,y,w=null;function E(t,e){null!==w&&clearInterval(w),w=function(t,e){return setInterval(function(){e.on&&t.length>=e.logCountThreshold&&(S(t.slice(0),e.url,0),t.splice(0))},e.transmitInterval)}(t,e),function(t,e){if(!e.on)return;navigator.sendBeacon?window.addEventListener("unload",function(){navigator.sendBeacon(e.url,JSON.stringify(t))}):window.addEventListener("beforeunload",function(){0<t.length&&S(t,e.url,1)})}(t,e)}function S(t,e,n){var o=new XMLHttpRequest,r=JSON.stringify(t);o.open("POST",e),o.setRequestHeader("Content-type","application/json;charset=UTF-8"),o.onreadystatechange=function(){4===o.readyState&&200!==o.status&&0<n&&S(t,e,n--)},o.send(r)}var I,N=["click","focus","blur","input","change","mouseover","submit"],T=["load","blur","focus"];function b(t){return{clicks:t.detail,ctrl:t.ctrlKey,alt:t.altKey,shift:t.shiftKey,meta:t.metaKey}}function D(n){return function(t){r={click:b,dblclick:b,mousedown:b,mouseup:b,focus:null,blur:null,input:t.logDetails?function(t){return{value:t.target.value}}:null,change:t.logDetails?function(t){return{value:t.target.value}}:null,dragstart:null,dragend:null,drag:null,drop:null,keydown:t.logDetails?function(t){return{key:t.keyCode,ctrl:t.ctrlKey,alt:t.altKey,shift:t.shiftKey,meta:t.metaKey}}:null,mouseover:null},h={},y={wheel:function(t){return{x:t.deltaX,y:t.deltaY,z:t.deltaZ}},scroll:function(){return{x:window.scrollX,y:window.scrollY}},resize:function(){return{width:window.outerWidth,height:window.outerHeight}}},I={submit:null}}(n),Object.keys(r).forEach(function(e){document.addEventListener(e,function(t){o(t,r[e])},!0)}),N.forEach(function(t){document.addEventListener(t,function(t){!function(t){var e=g(t.target),n=v(t),o=t.type,r=Math.floor(t.timeStamp&&0<t.timeStamp?i.time(t.timeStamp):Date.now());if(null==u&&(u=e,l=o,s=n,c=r,d=0),u!==e||l!==o){if(f={target:u,path:s,pageUrl:window.location.href,pageTitle:document.title,pageReferrer:document.referrer,count:d,duration:r-c,startTime:c,endTime:r,type:l,logType:"interval",targetChange:u!==e,typeChange:l!==o,userAction:!1,userId:i.userId,toolVersion:i.version,toolName:i.toolName,useraleVersion:i.useraleVersion,sessionID:i.sessionID},"function"==typeof m&&!m(f))return;"function"==typeof p&&(f=p(f)),a.push(f),u=e,l=o,s=n,c=r,d=0}u==e&&l==o&&(d+=1)}(t)},!0)}),Object.keys(y).forEach(function(e){h[e]=!0,window.addEventListener(e,function(t){h[e]&&(h[e]=!1,o(t,y[e]),setTimeout(function(){h[e]=!0},n.resolution))},!0)}),Object.keys(I).forEach(function(e){document.addEventListener(e,function(t){o(t,r[e]),function(t,e){e.on&&0<t.length&&S(t,e.url,1)}(a,n)},!0)}),T.forEach(function(t){window.addEventListener(t,function(t){o(t,function(){return{window:!0}})},!0)}),!0}var k,L,C,K,x={},O=[];function V(e){n.started||setTimeout(function(){var t=document.readyState;"interactive"===t||"complete"===t?(D(e),E(O,e),n.started=e.on=!0):V(e)},100)}n.started=!1,x.on=!1,x.useraleVersion=t,e(x,(L={},C=document.currentScript||(k=document.getElementsByTagName("script"))[k.length-1],K=C?C.getAttribute.bind(C):function(){return null},L.autostart="false"!==K("data-autostart"),L.url=K("data-url")||"http://localhost:8000",L.transmitInterval=+K("data-interval")||5e3,L.logCountThreshold=+K("data-threshold")||5,L.userId=K("data-user")||null,L.version=K("data-version")||null,L.logDetails="true"===K("data-log-details"),L.resolution=+K("data-resolution")||500,L.toolName=K("data-tool")||null,L.userFromParams=K("data-user-from-params")||null,L.time=function(t){if(t.timeStamp&&0<t.timeStamp){var e,n=Date.now()-t.timeStamp;if(n<0)e=function(){return t.timeStamp/1e3};else if(n>t.timeStamp){var o=performance.timing.navigationStart;e=function(t){return t+o}}else e=function(t){return t}}else e=function(){return Date.now()};return e}(document.createEvent("CustomEvent")),L.sessionID=K("data-session")||"session_"+String(Date.now()),L)),a=O,i=x,d=0,f=c=s=l=u=p=m=null,x.autostart&&V(x);return n.filter=function(t){m=t},n.log=function(t){return null!==t&&"object"==typeof t&&(O.push(t),!0)},n.map=function(t){p=t},n.options=function(t){return void 0!==t&&e(x,t),x},n.start=function(){n.started||V(x),x.on=!0},n.stop=function(){x.on=!1},n.version="2.0.2",n}({});