/**
 * Licensed to the Apache Software Foundation (ASF) under one or more
 * contributor license agreements.  See the NOTICE file distributed with
 * this work for additional information regarding copyright ownership.
 * The ASF licenses this file to You under the Apache License, Version 2.0
 * (the "License"); you may not use this file except in compliance with
 * the License.  You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * @preserved
 */
var userale=function(n){"use strict";var a,i,u,l,s,c,d,f,e="2.0.2";function t(n,o){Object.keys(o).forEach(function(e){if("userFromParams"===e){var t=function(e){var t=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),n=window.location.href.match(t);return n&&n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):null}(o[e]);t&&(n.userId=t)}n[e]=o[e]})}var m=null,p=null;function o(e,t){if(!i.on)return!1;var n=null;t&&(n=t(e));var o=function(e){return{milli:Math.floor(e),micro:Number((e%1).toFixed(3))}}(e.timeStamp&&0<e.timeStamp?i.time(e.timeStamp):Date.now()),r={target:g(e.target),path:v(e),pageUrl:window.location.href,pageTitle:document.title,pageReferrer:document.referrer,clientTime:o.milli,microTime:o.micro,location:function(e){return null!=e.pageX?{x:e.pageX,y:e.pageY}:null!=e.clientX?{x:document.documentElement.scrollLeft+e.clientX,y:document.documentElement.scrollTop+e.clientY}:{x:null,y:null}}(e),type:e.type,logType:"raw",userAction:!0,details:n,userId:i.userId,toolVersion:i.version,toolName:i.toolName,useraleVersion:i.useraleVersion,sessionID:i.sessionID};return!("function"==typeof m&&!m(r))&&("function"==typeof p&&(r=p(r)),a.push(r),!0)}function g(e){return e.localName?e.localName+(e.id?"#"+e.id:"")+(e.className?"."+e.className:""):e.nodeName?e.nodeName+(e.id?"#"+e.id:"")+(e.className?"."+e.className:""):e&&e.document&&e.location&&e.alert&&e.setInterval?"Window":"Unknown"}function v(e){var t=[];if(e.path)t=e.path;else for(var n=e.target;n;)t.push(n),n=n.parentElement;return function(e){var t,n=0,o=[];for(;t=e[n];)o.push(g(t)),++n;return o}(t)}var r,h,y,w=null;function S(e,t){null!==w&&clearInterval(w),w=function(e,t){return setInterval(function(){t.on&&e.length>=t.logCountThreshold&&(I(e.slice(0),t.url,0),e.splice(0))},t.transmitInterval)}(e,t),function(e,t){if(!t.on)return;navigator.sendBeacon?window.addEventListener("unload",function(){navigator.sendBeacon(t.url,JSON.stringify(e))}):window.addEventListener("beforeunload",function(){0<e.length&&I(e,t.url,1)})}(e,t)}function I(e,t,n){var o=new XMLHttpRequest,r=JSON.stringify(e);o.open("POST",t),o.setRequestHeader("Content-type","application/json;charset=UTF-8"),o.onreadystatechange=function(){4===o.readyState&&200!==o.status&&0<n&&I(e,t,n--)},o.send(r)}var E,N=["click","focus","blur","input","change","mouseover","submit"],T=["load","blur","focus"];function b(e){return{clicks:e.detail,ctrl:e.ctrlKey,alt:e.altKey,shift:e.shiftKey,meta:e.metaKey}}function D(n){return function(e){r={click:b,dblclick:b,mousedown:b,mouseup:b,focus:null,blur:null,input:e.logDetails?function(e){return{value:e.target.value}}:null,change:e.logDetails?function(e){return{value:e.target.value}}:null,dragstart:null,dragend:null,drag:null,drop:null,keydown:e.logDetails?function(e){return{key:e.keyCode,ctrl:e.ctrlKey,alt:e.altKey,shift:e.shiftKey,meta:e.metaKey}}:null,mouseover:null},h={},y={wheel:function(e){return{x:e.deltaX,y:e.deltaY,z:e.deltaZ}},scroll:function(){return{x:window.scrollX,y:window.scrollY}},resize:function(){return{width:window.outerWidth,height:window.outerHeight}}},E={submit:null}}(n),Object.keys(r).forEach(function(t){document.addEventListener(t,function(e){o(e,r[t])},!0)}),N.forEach(function(e){document.addEventListener(e,function(e){!function(e){var t=g(e.target),n=v(e),o=e.type,r=Math.floor(e.timeStamp&&0<e.timeStamp?i.time(e.timeStamp):Date.now());if(null==u&&(u=t,l=o,s=n,c=r,d=0),u!==t||l!==o){if(f={target:u,path:s,pageUrl:window.location.href,pageTitle:document.title,pageReferrer:document.referrer,count:d,duration:r-c,startTime:c,endTime:r,type:l,logType:"interval",targetChange:u!==t,typeChange:l!==o,userAction:!1,userId:i.userId,toolVersion:i.version,toolName:i.toolName,useraleVersion:i.useraleVersion,sessionID:i.sessionID},"function"==typeof m&&!m(f))return;"function"==typeof p&&(f=p(f)),a.push(f),u=t,l=o,s=n,c=r,d=0}u==t&&l==o&&(d+=1)}(e)},!0)}),Object.keys(y).forEach(function(t){h[t]=!0,window.addEventListener(t,function(e){h[t]&&(h[t]=!1,o(e,y[t]),setTimeout(function(){h[t]=!0},n.resolution))},!0)}),Object.keys(E).forEach(function(t){document.addEventListener(t,function(e){o(e,r[t]),function(e,t){t.on&&0<e.length&&I(e,t.url,1)}(a,n)},!0)}),T.forEach(function(e){window.addEventListener(e,function(e){o(e,function(){return{window:!0}})},!0)}),!0}var k,L,C,K,x={},O=[];function V(t){n.started||setTimeout(function(){var e=document.readyState;"interactive"===e||"complete"===e?(D(t),S(O,t),n.started=t.on=!0):V(t)},100)}n.started=!1,x.on=!1,x.useraleVersion=e,t(x,(L={},C=document.currentScript||(k=document.getElementsByTagName("script"))[k.length-1],K=C?C.getAttribute.bind(C):function(){return null},L.autostart="false"!==K("data-autostart"),L.url=K("data-url")||"http://localhost:8000",L.transmitInterval=+K("data-interval")||5e3,L.logCountThreshold=+K("data-threshold")||5,L.userId=K("data-user")||null,L.version=K("data-version")||null,L.logDetails="true"===K("data-log-details"),L.resolution=+K("data-resolution")||500,L.toolName=K("data-tool")||null,L.userFromParams=K("data-user-from-params")||null,L.time=function(e){if(e.timeStamp&&0<e.timeStamp){var t,n=Date.now()-e.timeStamp;if(n<0)t=function(){return e.timeStamp/1e3};else if(n>e.timeStamp){var o=performance.timing.navigationStart;t=function(e){return e+o}}else t=function(e){return e}}else t=function(){return Date.now()};return t}(document.createEvent("CustomEvent")),L.sessionID=K("data-session")||function(e,t){if(null===sessionStorage.getItem(e)){var n=t;sessionStorage.setItem(e,t)}else n=sessionStorage.getItem(e);return n}("userAleSessionId","session_"+String(Date.now())),L)),a=O,i=x,d=0,f=c=s=l=u=p=m=null,x.autostart&&V(x);return n.filter=function(e){m=e},n.log=function(e){return null!==e&&"object"==typeof e&&(O.push(e),!0)},n.map=function(e){p=e},n.options=function(e){return void 0!==e&&t(x,e),x},n.start=function(){n.started||V(x),x.on=!0},n.stop=function(){x.on=!1},n.version="2.0.2",n}({});