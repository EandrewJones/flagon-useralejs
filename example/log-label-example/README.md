# Custom Log Label Examples

Examples illustrating how to add custom labels to logs generated by `userale`.

## Adding Custom Labels to Logs

### Method 1

Consider the following HTML:

```html

<div>
    <button>New Feature</button>
</div>
```

The following code snippet will add a custom field and send a log whenever the new feature button is clicked:

```js
document.addEventListener('click', function (e) {
    if (e.target.innerHTML === 'New Feature') {
        window.userale.map(log => ({...log, logType: 'custom', customLabel: 'New Feature'}));
        window.userale.packageLog(e, window.userale.details(window.userale.options(), e.type));
        window.userale.map();
    } else {
        return false
    }
});
```

Taking this example apart:

This is the function that will decorate the custom labelling function. It adds another event listener to the DOM and
looks for the text "New Feature" in `click` events.

```js
document.addEventListener('click', function (e) {
    if (e.target.innerHTML === 'New Feature') {
        // ...
    } else {
        return false
    }
});
```

If the new feature doesn't include any identifiable text, you can also use:

```js
if (e.target.className === 'new-feature-class')
```

When the new event listener's callback is invoked and the event has been identified as being fired on the new feature,
the following block enables custom logging:

```js
window.userale.map(log => ({...log, logType: 'custom', customLabel: 'New Feature'}));
window.userale.packageLog(e, window.userale.details(window.userale.options(), e.type));
window.userale.map();
```

The `userale.map` function will map over the current log adding the custom log type and label. Then, `userale.
packageLog`
packages and sends the log. The `userale.map` call resets Userale's `map` API back to 
its original state. Failure to do this risks applying the custom label to all other `click` events.

Finally, note that this function in its current form will generate duplicate events, one that has the typical log 
schema and another with the added custom fields

### Method 2
Consider the following HTML:

```html

<div>
    <input class="new-feature-checkbox" type="checkbox">
</div>
```

The following code snippet will add custom fields and send a log whenever the checkbox is interacted with:

```js
    document.addEventListener('change', function (e) {
    if (e.target.className === 'new-feature-checkbox') {
        window.userale.packageCustomLog({
            type: 'change',
            customLabel: 'New Feature',
            customField1: 'New Checkbox',
        }, () => ({customDetails: Date.now()}), true);
    } else {
        return false
    }
});
```

As shown in Method 1, the `document.addEventListener` is the function that decorates the `userale.packageCustomLog` 
function. The `userale.packageCustomLog` function enables you to send a custom log on demand, as well as, add a custom details function that is invoked when the log is being created.