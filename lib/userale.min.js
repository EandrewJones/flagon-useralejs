!function(t){"use strict";function e(t){if(t.timeStamp&&t.timeStamp>0){var e,n=Date.now()-t.timeStamp;if(n<0)e=function(){return t.timeStamp/1e3};else if(n>t.timeStamp){var r=performance.timing.navigationStart;e=function(t){return t+r}}else e=function(t){return t}}else e=function(){return Date.now()};return e}function n(t,e){Object.keys(e).forEach(function(n){if("userFromParams"===n){var a=r(e[n]);a&&(t.userId=a)}t[n]=e[n]})}function r(t){var e=t,n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),r=window.location.href.match(n);return r&&r[2]?decodeURIComponent(r[2].replace(/\+/g," ")):null}function a(t,e){if(!E.on)return!1;var n=null;e&&(n=e(t));var r={target:l(t.target),path:u(t),clientTime:Math.floor(t.timeStamp&&t.timeStamp>0?E.time(t.timeStamp):Date.now()),location:o(t),type:t.type,userAction:!0,details:n,userId:E.userId,toolVersion:E.version,toolName:E.toolName,useraleVersion:E.useraleVersion};return K.push(r),!0}function o(t){return null!=t.pageX?{x:t.pageX,y:t.pageY}:null!=t.clientX?{x:document.documentElement.scrollLeft+t.clientX,y:document.documentElement.scrollTop+t.clientY}:{x:null,y:null}}function l(t){return t.localName?t.localName+(t.id?"#"+t.id:"")+(t.className?"."+t.className:""):t.nodeName?t.nodeName+(t.id?"#"+t.id:"")+(t.className?"."+t.className:""):t&&t.document&&t.location&&t.alert&&t.setInterval?"Window":"Unknown"}function u(t){var e=[];if(t.path)e=t.path;else for(var n=t.target;n;)e.push(n),n=n.parentElement;return i(e)}function i(t){for(var e,n=0,r=[];e=t[n];)r.push(l(e)),++n;return r}function c(t){S={click:function(t){return{clicks:t.detail,ctrl:t.ctrlKey,alt:t.altKey,shift:t.shiftKey,meta:t.metaKey}},dblclick:function(t){return{clicks:t.detail,ctrl:t.ctrlKey,alt:t.altKey,shift:t.shiftKey,meta:t.metaKey}},mousedown:function(t){return{clicks:t.detail,ctrl:t.ctrlKey,alt:t.altKey,shift:t.shiftKey,meta:t.metaKey}},mouseup:function(t){return{clicks:t.detail,ctrl:t.ctrlKey,alt:t.altKey,shift:t.shiftKey,meta:t.metaKey}},focus:null,blur:null,input:t.logDetails?function(t){return{value:t.target.value}}:null,change:t.logDetails?function(t){return{value:t.target.value}}:null,dragstart:null,dragend:null,drag:null,drop:null,keydown:t.logDetails?function(t){return{key:t.keyCode,ctrl:t.ctrlKey,alt:t.altKey,shift:t.shiftKey,meta:t.metaKey}}:null,mouseover:null,submit:null},N={},k={wheel:function(t){return{x:t.deltaX,y:t.deltaY,z:t.deltaZ}},scroll:function(){return{x:window.scrollX,y:window.scrollY}},resize:function(){return{width:window.outerWidth,height:window.outerHeight}}},b=["load","blur","focus"]}function s(t){return c(t),Object.keys(S).forEach(function(t){document.addEventListener(t,function(e){a(e,S[t])},!0)}),Object.keys(k).forEach(function(e){N[e]=!0,window.addEventListener(e,function(n){N[e]&&(N[e]=!1,a(n,k[e]),setTimeout(function(){N[e]=!0},t.resolution))},!0)}),b.forEach(function(t){window.addEventListener(t,function(t){a(t,function(){return{window:!0}})},!0)}),!0}function d(t,e){f(t,e),m(t,e)}function f(t,e){setInterval(function(){t.length>=e.logCountThreshold&&(h(t.slice(0),e.url,0),t.splice(0))},e.transmitInterval)}function m(t,e){navigator.sendBeacon?window.addEventListener("unload",function(){navigator.sendBeacon(e.url,JSON.stringify(t))}):window.addEventListener("beforeunload",function(){t.length>0&&h(t,e.url,1)})}function h(t,e,n){var r=new XMLHttpRequest,a=JSON.stringify(t);r.open("POST",e),r.setRequestHeader("Content-type","application/json;charset=UTF-8"),r.onreadystatechange=function(){4===r.readyState&&200!==r.status&&n>0&&h(t,e,n--)},r.send(a)}function p(e){t.started||setTimeout(function(){var n=document.readyState;"interactive"===n||"complete"===n?(s(e),d(T,e),t.started=e.on=!0):p(e)},100)}function y(){t.started||p(I),I.on=!0}function v(){I.on=!1}function g(t){return void 0!==t&&n(I,t),I}function w(t){return null!==t&&"object"==typeof t&&(T.push(t),!0)}var K,E,S,N,k,b,I={},T=[];t.started=!1,I.on=!1,I.useraleVersion="1.0.0",n(I,function(){var t={},n=document.currentScript||function(){var t=document.getElementsByTagName("script");return t[t.length-1]}(),r=n?n.getAttribute.bind(n):function(){return null};return t.autostart="false"!==r("data-autostart"),t.url=r("data-url")||"http://localhost:8000",t.transmitInterval=+r("data-interval")||5e3,t.logCountThreshold=+r("data-threshold")||5,t.userId=r("data-user")||null,t.version=r("data-version")||null,t.logDetails="true"===r("data-log-details"),t.resolution=+r("data-resolution")||500,t.toolName=r("data-tool")||null,t.userFromParams=r("data-user-from-params")||null,t.time=e(document.createEvent("CustomEvent")),t}()),function(t,e){K=t,E=e}(T,I),I.autostart&&p(I);t.version="1.0.0",t.start=y,t.stop=v,t.options=g,t.log=w}(this.userale=this.userale||{});